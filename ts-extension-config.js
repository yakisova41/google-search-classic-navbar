const packagejson = require("./package.json");
const path = require("path");
const fs = require("fs");

function getIconBase64() {
  const icon = fs.readFileSync(path.join(__dirname, "./assets/icon128.png"));
  const buf = Buffer.from(icon).toString("base64");
  return `data:image/png;base64,${buf}`;
}

module.exports = {
  userScriptHeader: [
    ["@name", "Google Search Classic Navbar"],
    ["@version", packagejson.version],
    ["@author", "yakisova41"],
    ["@license", packagejson.license],
    ["@namespace", "https://yakisova.com"],
    ["@description", "Restore the garbage UX nav bar."],
    ["@match", "https://www.Google.com/*"],
    ["@match", "https://www.Google.cat/*"],
    ["@match", "https://www.Google.ad/*"],
    ["@match", "https://www.Google.ae/*"],
    ["@match", "https://www.Google.com.af/*"],
    ["@match", "https://www.Google.com.ag/*"],
    ["@match", "https://www.Google.com.ai/*"],
    ["@match", "https://www.Google.al/*"],
    ["@match", "https://www.Google.am/*"],
    ["@match", "https://www.Google.co.ao/*"],
    ["@match", "https://www.Google.com.ar/*"],
    ["@match", "https://www.Google.as/*"],
    ["@match", "https://www.Google.at/*"],
    ["@match", "https://www.Google.com.au/*"],
    ["@match", "https://www.Google.az/*"],
    ["@match", "https://www.Google.ba/*"],
    ["@match", "https://www.Google.com.bd/*"],
    ["@match", "https://www.Google.be/*"],
    ["@match", "https://www.Google.bf/*"],
    ["@match", "https://www.Google.bg/*"],
    ["@match", "https://www.Google.com.bh/*"],
    ["@match", "https://www.Google.bi/*"],
    ["@match", "https://www.Google.bj/*"],
    ["@match", "https://www.Google.com.bn/*"],
    ["@match", "https://www.Google.com.bo/*"],
    ["@match", "https://www.Google.com.br/*"],
    ["@match", "https://www.Google.bs/*"],
    ["@match", "https://www.Google.bt/*"],
    ["@match", "https://www.Google.co.bw/*"],
    ["@match", "https://www.Google.by/*"],
    ["@match", "https://www.Google.com.bz/*"],
    ["@match", "https://www.Google.ca/*"],
    ["@match", "https://www.Google.cd/*"],
    ["@match", "https://www.Google.cf/*"],
    ["@match", "https://www.Google.cg/*"],
    ["@match", "https://www.Google.ch/*"],
    ["@match", "https://www.Google.ci/*"],
    ["@match", "https://www.Google.co.ck/*"],
    ["@match", "https://www.Google.cl/*"],
    ["@match", "https://www.Google.cm/*"],
    ["@match", "https://www.Google.cn/*"],
    ["@match", "https://www.Google.com.co/*"],
    ["@match", "https://www.Google.co.cr/*"],
    ["@match", "https://www.Google.com.cu/*"],
    ["@match", "https://www.Google.cv/*"],
    ["@match", "https://www.Google.com.cy/*"],
    ["@match", "https://www.Google.cz/*"],
    ["@match", "https://www.Google.de/*"],
    ["@match", "https://www.Google.dj/*"],
    ["@match", "https://www.Google.dk/*"],
    ["@match", "https://www.Google.dm/*"],
    ["@match", "https://www.Google.com.do/*"],
    ["@match", "https://www.Google.dz/*"],
    ["@match", "https://www.Google.com.ec/*"],
    ["@match", "https://www.Google.ee/*"],
    ["@match", "https://www.Google.com.eg/*"],
    ["@match", "https://www.Google.es/*"],
    ["@match", "https://www.Google.com.et/*"],
    ["@match", "https://www.Google.fi/*"],
    ["@match", "https://www.Google.com.fj/*"],
    ["@match", "https://www.Google.fm/*"],
    ["@match", "https://www.Google.fr/*"],
    ["@match", "https://www.Google.ga/*"],
    ["@match", "https://www.Google.ge/*"],
    ["@match", "https://www.Google.gg/*"],
    ["@match", "https://www.Google.com.gh/*"],
    ["@match", "https://www.Google.com.gi/*"],
    ["@match", "https://www.Google.gl/*"],
    ["@match", "https://www.Google.gm/*"],
    ["@match", "https://www.Google.gr/*"],
    ["@match", "https://www.Google.com.gt/*"],
    ["@match", "https://www.Google.gy/*"],
    ["@match", "https://www.Google.com.hk/*"],
    ["@match", "https://www.Google.hn/*"],
    ["@match", "https://www.Google.hr/*"],
    ["@match", "https://www.Google.ht/*"],
    ["@match", "https://www.Google.hu/*"],
    ["@match", "https://www.Google.co.id/*"],
    ["@match", "https://www.Google.ie/*"],
    ["@match", "https://www.Google.co.il/*"],
    ["@match", "https://www.Google.im/*"],
    ["@match", "https://www.Google.co.in/*"],
    ["@match", "https://www.Google.iq/*"],
    ["@match", "https://www.Google.is/*"],
    ["@match", "https://www.Google.it/*"],
    ["@match", "https://www.Google.je/*"],
    ["@match", "https://www.Google.com.jm/*"],
    ["@match", "https://www.Google.jo/*"],
    ["@match", "https://www.Google.co.jp/*"],
    ["@match", "https://www.Google.co.ke/*"],
    ["@match", "https://www.Google.kg/*"],
    ["@match", "https://www.Google.com.kh/*"],
    ["@match", "https://www.Google.ki/*"],
    ["@match", "https://www.Google.co.kr/*"],
    ["@match", "https://www.Google.com.kw/*"],
    ["@match", "https://www.Google.kz/*"],
    ["@match", "https://www.Google.la/*"],
    ["@match", "https://www.Google.com.lb/*"],
    ["@match", "https://www.Google.li/*"],
    ["@match", "https://www.Google.lk/*"],
    ["@match", "https://www.Google.co.ls/*"],
    ["@match", "https://www.Google.lt/*"],
    ["@match", "https://www.Google.lu/*"],
    ["@match", "https://www.Google.lv/*"],
    ["@match", "https://www.Google.com.ly/*"],
    ["@match", "https://www.Google.co.ma/*"],
    ["@match", "https://www.Google.md/*"],
    ["@match", "https://www.Google.me/*"],
    ["@match", "https://www.Google.mg/*"],
    ["@match", "https://www.Google.mk/*"],
    ["@match", "https://www.Google.ml/*"],
    ["@match", "https://www.Google.com.mm/*"],
    ["@match", "https://www.Google.mn/*"],
    ["@match", "https://www.Google.ms/*"],
    ["@match", "https://www.Google.com.mt/*"],
    ["@match", "https://www.Google.mu/*"],
    ["@match", "https://www.Google.mv/*"],
    ["@match", "https://www.Google.mw/*"],
    ["@match", "https://www.Google.com.mx/*"],
    ["@match", "https://www.Google.com.my/*"],
    ["@match", "https://www.Google.co.mz/*"],
    ["@match", "https://www.Google.com.na/*"],
    ["@match", "https://www.Google.ne/*"],
    ["@match", "https://www.Google.com.ng/*"],
    ["@match", "https://www.Google.com.ni/*"],
    ["@match", "https://www.Google.nl/*"],
    ["@match", "https://www.Google.no/*"],
    ["@match", "https://www.Google.com.np/*"],
    ["@match", "https://www.Google.nr/*"],
    ["@match", "https://www.Google.nu/*"],
    ["@match", "https://www.Google.co.nz/*"],
    ["@match", "https://www.Google.com.om/*"],
    ["@match", "https://www.Google.com.pa/*"],
    ["@match", "https://www.Google.com.pe/*"],
    ["@match", "https://www.Google.com.pg/*"],
    ["@match", "https://www.Google.com.ph/*"],
    ["@match", "https://www.Google.com.pk/*"],
    ["@match", "https://www.Google.pl/*"],
    ["@match", "https://www.Google.pn/*"],
    ["@match", "https://www.Google.com.pr/*"],
    ["@match", "https://www.Google.ps/*"],
    ["@match", "https://www.Google.pt/*"],
    ["@match", "https://www.Google.com.py/*"],
    ["@match", "https://www.Google.com.qa/*"],
    ["@match", "https://www.Google.ro/*"],
    ["@match", "https://www.Google.ru/*"],
    ["@match", "https://www.Google.rw/*"],
    ["@match", "https://www.Google.com.sa/*"],
    ["@match", "https://www.Google.com.sb/*"],
    ["@match", "https://www.Google.sc/*"],
    ["@match", "https://www.Google.se/*"],
    ["@match", "https://www.Google.com.sg/*"],
    ["@match", "https://www.Google.sh/*"],
    ["@match", "https://www.Google.si/*"],
    ["@match", "https://www.Google.sk/*"],
    ["@match", "https://www.Google.com.sl/*"],
    ["@match", "https://www.Google.sm/*"],
    ["@match", "https://www.Google.sn/*"],
    ["@match", "https://www.Google.so/*"],
    ["@match", "https://www.Google.sr/*"],
    ["@match", "https://www.Google.st/*"],
    ["@match", "https://www.Google.com.sv/*"],
    ["@match", "https://www.Google.td/*"],
    ["@match", "https://www.Google.tg/*"],
    ["@match", "https://www.Google.co.th/*"],
    ["@match", "https://www.Google.com.tj/*"],
    ["@match", "https://www.Google.tl/*"],
    ["@match", "https://www.Google.tm/*"],
    ["@match", "https://www.Google.tn/*"],
    ["@match", "https://www.Google.to/*"],
    ["@match", "https://www.Google.com.tr/*"],
    ["@match", "https://www.Google.tt/*"],
    ["@match", "https://www.Google.com.tw/*"],
    ["@match", "https://www.Google.co.tz/*"],
    ["@match", "https://www.Google.com.ua/*"],
    ["@match", "https://www.Google.co.ug/*"],
    ["@match", "https://www.Google.co.uk/*"],
    ["@match", "https://www.Google.com.uy/*"],
    ["@match", "https://www.Google.co.uz/*"],
    ["@match", "https://www.Google.com.vc/*"],
    ["@match", "https://www.Google.co.ve/*"],
    ["@match", "https://www.Google.vg/*"],
    ["@match", "https://www.Google.co.vi/*"],
    ["@match", "https://www.Google.com.vn/*"],
    ["@match", "https://www.Google.vu/*"],
    ["@match", "https://www.Google.ws/*"],
    ["@match", "https://www.Google.co.za/*"],
    ["@match", "https://www.Google.co.zm/*"],
    ["@match", "https://www.Google.co.zw/*"],
    ["@grant", "unsafeWindow"],
    ["@run-at", "document-start"],
    ["@name:ja", "Google検索の上のメニューを元に戻す"],
    [
      "@description:ja",
      "Google検索の上のメニューを従来のデザインに無理やり戻します。",
    ],
    ["@icon", getIconBase64()],
  ],
  devServer: {
    port: 5173,
    host: "localhost",
    websocket: 5174,
  },
  manifest: {
    name: "__MSG_Name__",
    short_name: "gscn",
    version: String(packagejson.version),
    manifest_version: 3,
    description: "__MSG_Description__",
    default_locale: "en",
    icons: {
      16: "assets/icon16.png",
      48: "assets/icon48.png",
      128: "assets/icon128.png",
    },
  },
  locales: {
    ja: {
      Name: {
        message: "Google検索の上のメニューを元に戻す",
      },
      Description: {
        message: "Google検索の上のメニューを従来のデザインに無理やり戻します。",
      },
    },
    en: {
      Name: {
        message: "Google Search Classic Navbar",
      },
      Description: {
        message: "Restore the garbage UX nav bar.",
      },
    },
  },
  assetsDir: path.join(__dirname, "assets"),
  noSandbox: false,
  passCSP: true,
  extensionLoadMode: "contentScript",
};
